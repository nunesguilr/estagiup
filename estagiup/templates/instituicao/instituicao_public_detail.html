{% extends '_base.html' %} 

{% block body_class %}theme-light{% endblock %}

{% block title %}{{ instituicao.nome }}{% endblock %} 

{% block content %}
<div class="container my-5">

    {% if messages %} 
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %} 
    {% endif %}

    <div class="row">
        <div class="col-lg-8">
            <div class="card p-4 mb-4">
                <h1 class="display-5 fw-bold">{{ instituicao.nome }}</h1>
                <p class="text-muted"><i class='bx bx-map'></i> {{ instituicao.endereco }}</p>
                <hr>

                <h4 class="mt-4">Sobre a Instituição</h4>
                <p>
                    {{ instituicao.descricao|linebreaksbr|default:"Nenhuma descrição fornecida." }}
                </p>

                <hr>
                <h4 class="mt-4 mb-3">Vagas Abertas</h4>
                <div class="list-group">
                    {% for vaga in vagas_da_instituicao %}
                    <a href="{% url 'vaga:vaga_public_detail' vaga.id %}" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">{{ vaga.titulo }}</h5>
                            <small class="text-muted">{{ vaga.prazo }}</small>
                        </div>
                        <p class="mb-1">{{ vaga.descricao|truncatewords:20 }}</p>
                    </a>
                    {% empty %}
                    <div class="alert alert-secondary" role="alert">
                        Esta instituição não possui vagas abertas no momento.
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card p-3">
                <h5 class="card-title">Informações de Contato</h5>
                <ul class="list-unstyled">
                    <li><strong>Telefone:</strong> {{ instituicao.telefone }}</li>
                    <li><strong>CNPJ:</strong> {{ instituicao.cnpj }}</li>
                    <li><strong>Tipo:</strong> {{ instituicao.get_tipo_display }}</li>
                </ul>
            </div>
        </div>

    </div>
</div>
{% endblock %}