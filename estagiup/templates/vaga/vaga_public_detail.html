{% extends '_base.html' %}
{% block body_class %}theme-light{% endblock %}

{% block title %}{{ vaga.titulo }}{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-8">
            <div class="card p-4 mb-4">
                <h1 class="display-5 fw-bold">{{ vaga.titulo }}</h1>
                <p class="text-muted">{{ vaga.instituicao.nome }}</p>
                <hr>
                <h4 class="mt-4">Descrição da Vaga</h4>
                <p>{{ vaga.descricao|linebreaksbr }}</p>

                <h4 class="mt-4">Requisitos</h4>
                <p>{{ vaga.requisitos|linebreaksbr }}</p>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card p-3">
                <h5 class="card-title">Resumo da Vaga</h5>
                <ul class="list-unstyled mb-4">
                    <li><strong>Remuneração:</strong> R$ {{ vaga.remuneracao|default:"A combinar" }}</li>
                    <li><strong>Prazo:</strong> {{ vaga.prazo }}</li>
                    <li><strong>Cursos:</strong>
                        {% for curso in vaga.cursos.all %}
                        <span class="badge bg-secondary">{{ curso.nome }}</span>
                        {% endfor %}
                    </li>
                </ul>

                {% if request.user.is_authenticated %}
                {% if 'Alunos' in request.user.groups.all.0.name %}
                <a href="{% url 'estagio:estagio_create' vaga_id=vaga.id %}"
                    class="btn btn-primary-custom w-100">Iniciar Processo de Estágio</a>
                {% else %}
                <div class="alert alert-info text-center" role="alert">
                    Apenas alunos podem iniciar estágios.
                </div>
                {% endif %}
                {% else %}
                <a href="{% url 'login' %}?next={% url 'estagio:estagio_create' vaga_id=vaga.id %}"
                    class="btn btn-primary-custom w-100">Faça login para Iniciar</a>
                {% endif %}

            </div>
        </div>
    </div>
</div>
{% endblock %}